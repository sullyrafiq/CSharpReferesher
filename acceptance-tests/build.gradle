buildscript {
    apply from: "$rootDir/gradle/repos.gradle", to: buildscript

    dependencies {
        classpath 'com.moowork.gradle:gradle-node-plugin:1.3.1'
    }
}

apply plugin: 'com.moowork.node'

node {
    version = '8.10.0'
    npmVersion = '5.6.0'
    yarnVersion = '1.5.1'
    distBaseUrl = 'https://artifactory3-eu1.moneysupermarket.com/artifactory/nodejs'
    download = true
    nodeModulesDir = file("${project.projectDir}")
}

task installPackages(type: YarnTask) {
    args = ['install']
}

task lintTest(type: YarnTask) {
    dependsOn(clean, yarn_install)
    args = ['lint']
}

task acceptanceTests(type: YarnTask) {
    dependsOn(clean, installPackages, lintTest)
    args = ['test', '--reporter', 'html-reporter.js', '--env', 'headlessChrome']
}
